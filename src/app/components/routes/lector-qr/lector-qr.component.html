<body class="text-center" [ngClass]="bgClass">
  <div class="container-fluid">
    <div *ngIf="!admin" class="row row justify-content-start text-start">
      <div class="col-12">
        <button class="btn btn m-2" (click)="back()">
          <img class="pb-1" src="../../../../assets/imagenes/cards/back2.png" width="18px" alt="">
        </button>
      </div>
    </div>

    <div *ngIf="admin" class="row row justify-content-end text-end">
      <div class="col-12">
        <button class="btn btn-dark m-2" (click)="clearStorage()">
          <img class="pb-1" src="../../../../assets/imagenes/cards/out.png" width="18px" alt="">
        </button>
      </div>
    </div>

    <div class="row justify-content-center pb-3">
      <div class="col-12 pb-2 pt-0 text-light">
        <div>
          <zxing-scanner (scanSuccess)="onCodeResult($event)"></zxing-scanner>
          <h3 *ngIf="!qrResultString" class="text-light">ESCANEANDO QR</h3>
          <h3 *ngIf="qrResultString && !entidadDistinta" class="text-warning">ESCANEO CORRECTO</h3>
          <h3 *ngIf="qrResultString && entidadDistinta" class="text-warning">ERROR</h3>
        </div>
      </div>

      <div class="col-12 pb-4 justify-content-center align-items-center">
        <div *ngIf="qrResultString" class="text-light">
          <div *ngIf="!entidadDistinta" class="pt-2">
            <h2>TARJETA</h2>
            <div class="justify-content-center align-items-center pb-4">
              <span class="fs-3 pt-1">Contador <b>{{data_cafe.contador}}</b></span><br>
              <span class="fs-5">Gratis acumulados <b>{{data_cafe.cantidad_gratis}}</b></span>
            </div>
            <p *ngIf="data_cafe.gratis">Gratis</p>
            <button *ngIf="!data_cafe.gratis && data_cafe.contador < 10" type="button" class="btn btn-warning" (click)="sumar()">Sumar +1</button>
            <button *ngIf="data_cafe.gratis || data_cafe.contador == 10" type="button" class="btn btn-danger" (click)="sumar()">Canje gratis</button>
          </div>

          <div *ngIf="entidadDistinta" class="pt-2">
            <h2>QR no valido</h2>
            <button type="button" class="btn btn-danger" (click)="reiniciarEscaneo()">Escanear</button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="entidad.id == 'e4180b6c-a43e-4157-86c1-3c134ede2bb8'" class="text-center mt-1">
      <button class="btn btn-light" (click)="menu()"><b>EDITAR CARTA</b><img src="../../../../assets/imagenes/cards/menus.png" width="35px" alt=""></button>
    </div>
  </div>
</body>
