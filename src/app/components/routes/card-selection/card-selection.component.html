<app-popup-qr *ngIf="popupService.mostrar"></app-popup-qr>
<app-info *ngIf="infopopupService.mostrar"></app-info>
<app-toast #toast></app-toast>
<body class="d-flex align-items-center" [ngClass]="bgClass">
    <div *ngIf="upload == false" class="container-fluid d-flex justify-content-center align-items-center vh-100">
        <div class="spinner-border text-light" role="status">
          
        </div>
      </div>
      
      
    <div *ngIf="upload == true"  class="container-fluid" style="font-family: OpenSans;">
       <!--  <div *ngIf="data_contador.opcion == 0 " class="row justify-content-center text-white">
            <div class="col pt-5">
                <h2 class="text-center text-white custom-shadow">CARDS</h2>  
                <div class="row justify-content-center">
                    <div class="col-10 col-sm-6 col-md-3 card-w d-flex align-items-center text-center " (click)="op1()">

                        <div class="container-fluid card-w-in">
                            <img src="../../../../assets/imagenes/cards/cafe.png" class="pb-5" alt="">
                        </div>

                        <div class="container-fluid card-w-in">
                            <h3 class="pb-4">Coffee card</h3>   
                        </div>                        
                    </div>
                    

                    <div class="row justify-content-center">
                        <div class="col-10 col-sm-6 col-md-3 card-ww d-flex align-items-center text-center " (click)="op2()">
    
                            <div class="container-fluid card-w-in">
                                <img src="../../../../assets/imagenes/cards/breackfast.png" class="pb-4" alt="">
                            </div>
    
                            <div class="container-fluid card-w-in">
                                <h3 class="pb-4">Breackfast card</h3>   
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-center">
                        <div class="col-10 col-sm-6 col-md-3 card-w d-flex align-items-center text-center " (click)="op3()">
    
                            <div class="container-fluid card-w-in">
                                <img src="../../../../assets/imagenes/cards/menu.png" class="pb-4" alt="">
                            </div>
    
                            <div class="container-fluid card-w-in">
                                <h3 class="pb-4">Menu card</h3>   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
 -->


        <div *ngIf="data_contador.opcion == 0 " class="row justify-content-center text-white upload">
            <div class="col pt-5">
                <h2 *ngIf="entidadOpcion=='1'" class="text-center text-white custom-shadow" style="font-family: OpenSans; text-transform: capitalize;">{{entidad.nombre}} <img src="../../../../assets/imagenes/cards/card.png" width="50px" alt=""></h2>  
                <h2 *ngIf="entidadOpcion=='2'" class="text-center text-white custom-shadow" style="text-transform: capitalize;">{{entidad.nombre}} <img src="../../../../assets/imagenes/cards/card.png" width="50px" alt=""></h2>  
                <div class="row justify-content-center">
                 
                    <div class="col-12 col-md-6 col-lg-4 pt-2"> <!-- Columna que ocupa el ancho completo en dispositivos móviles y 4 columnas en dispositivos más grandes -->
                      <div class="card-wc d-flex flex-column align-items-center text-center"> <!-- Estilos para el contenedor de la tarjeta -->
                        <div class="pt-3">
                          <p class="text-center fs-4">{{nombre}}</p>
                        </div>
                  
                        <div class="pt-2 d-flex justify-content-center">
                          <!-- Iterar para crear los 10 círculos -->
                          <ng-container *ngFor="let i of contadorArray; let index = index">
                            <!-- Verificar si el índice es menor que el contador para colorear el círculo -->
                            <div class="circle mr-2" [ngClass]="{ 'filled': index < data_contador.contador }"></div>
                          </ng-container>
                        </div>
                  
                        <div class="pt-3 pb-3 d-flex justify-content-evenly  align-items-center w-100">
                          <div class="d-flex align-items-center">
                            <img *ngIf="entidadOpcion=='1'" src="../../../../assets/imagenes/cards/burguers.png" width="50px" class="mr-3" alt="">
                            <img *ngIf="entidadOpcion=='2'" src="../../../../assets/imagenes/cards/cafe.png" width="70px" class="mr-3" alt="">
                        </div>
                        <p *ngIf="entidadOpcion=='1'" class="text-center fs-5 pt-3 mb-1">Burguers <b>{{data_contador.contador}}</b></p>
                        <p *ngIf="entidadOpcion=='2'" class="text-center fs-5 pt-3 mb-1">Cafes <b>{{data_contador.contador}}</b></p>
                        <button *ngIf="data_contador.contador!=10" class="btn btn-light mt-2" (click)="cifrado()"><img src="../../../../assets/imagenes/cards/ticketmas.png" width="28px" alt=""></button>
                        <button *ngIf="data_contador.contador==10" class="btn btn-light mt-2" (click)="cifrado()"><img src="../../../../assets/imagenes/cards/free.png" width="30px" alt=""></button>
                        </div>
                  
                      </div>
                    </div>
                    <span class="text-center" (click)="onInfoTouch()">Información <img src="../../../../assets/imagenes/cards/info.png" width="20" alt=""></span>
                     <!--  <div class="col-12 justify-content-center text-center">
                              
                        <button class="btn btn-dark" (click)="onInfoTouch()">Info</button>
                      </div>  -->
                   
                  </div>
                  
                  
            </div>            
            
        </div>
       
        <div *ngIf="data_contador.opcion == 2 " class="row justify-content-center text-white upload">
            <div class="col pt-5">
                <h2 class="text-center text-white custom-shadow">BREACKFAST <img src="../../../../assets/imagenes/cards/card.png" width="50px" alt=""></h2>  
                <div class="row justify-content-center">
                    <div class="col-12 col-md-6 col-lg-4 pt-3"> <!-- Columna que ocupa el ancho completo en dispositivos móviles y 4 columnas en dispositivos más grandes -->
                      <div class="card-wc d-flex flex-column align-items-center text-center"> <!-- Estilos para el contenedor de la tarjeta -->
                        <div class="pt-3">
                          <p class="text-center fs-4">{{nombre}}</p>
                        </div>
                  
                        <div class="pt-2 d-flex justify-content-center">
                          <!-- Iterar para crear los 10 círculos -->
                          <ng-container *ngFor="let i of contadorArray; let index = index">
                            <!-- Verificar si el índice es menor que el contador para colorear el círculo -->
                            <div class="circle mr-2" [ngClass]="{ 'filled': index < data_contador.contador }"></div>
                          </ng-container>
                        </div>
                  
                        <div class="pt-3 pb-3 d-flex justify-content-evenly  align-items-center w-100">
                          <div class="d-flex align-items-center">
                            <img src="../../../../assets/imagenes/cards/breackfast.png" width="70px" class="mr-3" alt="">
                        </div>
                        <p class="text-center fs-5 pt-3 mb-1">Cafes <b>{{data_contador.contador}}</b></p>
                        <button *ngIf="data_contador.contador!=10" class="btn btn-light mt-2"  (click)="cifrado()"><img src="../../../../assets/imagenes/cards/ticketmas.png" width="28px" alt=""></button>
                        <button *ngIf="data_contador.contador==10" class="btn btn-warning mt-2" (click)="cifrado()"><img src="../../../../assets/imagenes/cards/free.png" width="28px" alt=""></button>
                        </div>
                  
                      </div>
                    </div>
                  </div>
                  
            </div>
            
        </div>

        <div *ngIf="data_contador.opcion == 3 " class="row justify-content-center text-white upload">
            <div class="col pt-5">
                <h2 class="text-center text-white custom-shadow">MENU <img src="../../../../assets/imagenes/cards/card.png" width="50px" alt=""></h2>  
                <div class="row justify-content-center">
                    <div class="col-12 col-md-6 col-lg-4 pt-3"> <!-- Columna que ocupa el ancho completo en dispositivos móviles y 4 columnas en dispositivos más grandes -->
                      <div class="card-wc d-flex flex-column align-items-center text-center"> <!-- Estilos para el contenedor de la tarjeta -->
                        <div class="pt-3">
                          <p class="text-center fs-4">{{nombre}}</p>
                        </div>
                  
                        <div class="pt-2 d-flex justify-content-center">
                          <!-- Iterar para crear los 10 círculos -->
                          <ng-container *ngFor="let i of contadorArray; let index = index">
                            <!-- Verificar si el índice es menor que el contador para colorear el círculo -->
                            <div class="circle mr-2" [ngClass]="{ 'filled': index < data_contador.contador }"></div>
                          </ng-container>
                        </div>
                  
                        <div class="pt-3 pb-3 d-flex justify-content-evenly  align-items-center w-100">
                          <div class="d-flex align-items-center">
                            <img src="../../../../assets/imagenes/cards/menu.png" width="70px" class="mr-3" alt="">
                        </div>
                        <p class="text-center fs-5 pt-3 mb-1">Cafes <b>{{data_contador.contador}}</b></p>
                          
                        <button *ngIf="data_contador.contador!=10" class="btn btn-light mt-2"  (click)="cifrado()"><img src="../../../../assets/imagenes/cards/ticketmas.png" width="28px" alt=""></button>
                        <button *ngIf="data_contador.contador==10" class="btn btn-warning mt-2" (click)="cifrado()"><img src="../../../../assets/imagenes/cards/free.png" width="28px" alt=""></button>
                        </div>
                  
                      </div>
                    </div>
                  </div>
                  
            </div>
            
        </div>



          <!-- Modal -->
          <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header text-center justify-content-center">
                  <h1 class="modal-title fs-5" id="staticBackdropLabel">Sumar <img src="../../../../assets/imagenes/cards/cardqr.png" width="35px" alt=""></h1> 
                  
                 <!--  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>
                <div class="modal-body text-center pt-5 pb-5 mt-2 mb-2">
                  <qrcode [qrdata]="uuidCifrado" [width]="300" [errorCorrectionLevel]="'M'"></qrcode>
                </div>
                <div class="modal-footer justify-content-center">
                  <!-- <button type="button" class="btn btn-primary" (click)="sumar()" data-bs-dismiss="modal">Sumar prueba</button> -->
                  <button type="button" class="btn btn-dark text-center" (click)="reload()" data-bs-dismiss="modal">Cerrar</button>
                </div>
              </div>
            </div>
          </div>

    </div>
</body>
